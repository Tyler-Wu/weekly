@using WeeklyReport.Models
@model IEnumerable<WeeklyReport.Models.User>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div id="content" class="span10">
    <!-- content starts -->

    <div>
        <ul class="breadcrumb">
            <li>
                <a href="#">Home</a> <span class="divider">/</span>
            </li>
            <li>
                <a href="#">Tables</a>
            </li>
        </ul>
    </div>

    <div class="row-fluid sortable">
        <div class="box span12">
            <div class="box-header well" data-original-title>
                <h2><i class="icon-user"></i> Members</h2>
                <div class="box-icon">
                    <a href="#" class="btn btn-setting btn-round"><i class="icon-cog"></i></a>
                    <a href="#" class="btn btn-minimize btn-round"><i class="icon-chevron-up"></i></a>
                    <a href="#" class="btn btn-close btn-round"><i class="icon-remove"></i></a>
                </div>
            </div>
            <div class="box-content">
                <span class="btn btn-block" onclick="openDialog('/user/create')">
                    <i class="icon-trash icon-white"></i>
                    Create
                </span>
                <table class="table table-striped table-bordered bootstrap-datatable datatable">
                    <thead>
                        <tr>
                            <th>UserName</th>
                            <th>Name</th>
                            <th>Role</th>
                            <th>CreateDate</th>
                            <th>UpdateDate</th>
                            <th>Projects</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var m in Model)
                        {
                            <tr>
                                <td>@m.UserName</td>
                                <td class="center">@m.Name</td>
                                <td class="center">@m.Role.Name</td>
                                <td class="center">@m.CreateDate</td>
                                <td class="center">@m.UpdateDate</td>
                                <td class="center">
                                    @foreach (Project P in m.Project)
                                    {
                                        @(P.Name + " ")
                                    }
                                </td>
                                @*<td class="center">
                                    <span class="label label-success">Active</span>
                                </td>*@
                                <td class="center">
                                    <span class="btn btn-success" onclick="openDialog('/User/Details/@m.UserId','Details')">
                                        <i class="icon-zoom-in icon-white"></i>
                                        View
                                    </span>
                                    <span class="btn btn-info" onclick="openDialog('/User/Edit/@m.UserId','Edit')">
                                        <i class="icon-edit icon-white"></i>
                                        Edit
                                    </span>
                                    <span class="btn btn-danger" onclick="DelUser('@m.UserId')">
                                        <i class="icon-trash icon-white"></i>
                                        Delete
                                    </span>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                
            </div><!--/span-->

        </div><!--/row-->
    </div>
    <div class="demo-content">
        <div class="row">
            <div class="span16">
                <div id="grid">

                </div>

            </div>

        </div>
        <script src="~/Scripts/jquery-1.8.2.js"></script>
        <script src="~/Scripts/BUI/bui.js"></script>
        <script src="~/Scripts/common.js"></script>
        <script>
           function DelUser(uid) {
                if (confirm("Are you sure to delete this user?")) {
                    $.ajax({
                        type: "GET",
                        url: "/user/Delete/" + uid,
                        success: function (data) {
                            if (data === "success") {
                                alert("deleted successfully");
                                window.location.reload();
                            } else {
                                alert("deleted fail");
                            }
                        }
                    });
                }
            };
           function EditUser(user) {
                    var userId = user;
                };
        </script>
        <script src="~/Scripts/User/myJs.js"></script>
    </div>
</div>
    

